package edu.rice.comp504.model;

import com.google.gson.*;
import edu.rice.comp504.model.command.IGameCmd;
import edu.rice.comp504.model.command.InputCmd;
import edu.rice.comp504.model.command.UpdateCmd;
import edu.rice.comp504.model.environment.AllEnv;
import edu.rice.comp504.model.gameobj.Fruit;
import edu.rice.comp504.model.gameobj.Ghost;
import edu.rice.comp504.model.gameobj.MovingObj;
import edu.rice.comp504.model.gameobj.Player;
import edu.rice.comp504.model.strategy.skill.AccelerateSkillStrategy;
import edu.rice.comp504.model.strategy.skill.ISkillStrategy;
import edu.rice.comp504.model.strategy.skill.InvincibleSkillStrategy;
import edu.rice.comp504.model.strategy.skill.TeleportSkillStrategy;
import edu.rice.comp504.model.strategy.update.*;

import java.awt.*;
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;
import java.io.*;
import java.util.ArrayList;
import java.util.List;

/**
 * DispatcherAdapter, used to connect controller and model class.
 */
public class DispatcherAdapter {
    private PropertyChangeSupport pcs;
    private AllEnv env;

    // TODO: remove this with methods to get moving objs from pcs;

    /**
     * Constructor.
     */
    public DispatcherAdapter() {
        pcs = new PropertyChangeSupport(this);
    }

    private void addListener(String type, PropertyChangeListener pcl) {
        pcs.addPropertyChangeListener(type, pcl);
    }


    /**
     * Load the game.
     */
    public GameBean loadGame(int level, int mode, String path) throws FileNotFoundException {

        reset();

        int[][] matrix = loadMapFromJson(level, path);
        this.env = new AllEnv(matrix, level);

        AllEnv.InitPlace initPlace = env.getInitPlace();
        Point[] playerLoc = initPlace.getPlayerLoc();
        Point[] ghostLoc = initPlace.getGhostLoc();
        List<List<ISkillStrategy>> skills = new ArrayList<>();
        skills.add(
            new ArrayList<>() {
                {
                    add(new AccelerateSkillStrategy(500, 50, 0));
                    add(new InvincibleSkillStrategy(500, 50, 0));
                    add(new TeleportSkillStrategy(500, 0, 0));
                }
            }
        );
        skills.add(
            new ArrayList<>() {
                {
                    add(new AccelerateSkillStrategy(500, 50, 0));
                    add(new InvincibleSkillStrategy(500, 50, 0));
                    add(new TeleportSkillStrategy(500, 0, 0));
                }
            }
        );

        //env.setDotNums(10);

        for (int i = 0; i < mode; i++) {
            addListener("player", new Player(5, playerLoc[i], new PacmanUpdateStrategy(), i, 3, skills.get(i)));
        }
        AUpdateStrategy[] strategies = new AUpdateStrategy[] {new BashfulUpdateStrategy(), new PokeyUpdateStrategy(), new ShadowUpdateStrategy(), new SpeedyUpdateStrategy()};
        for (int i = 0; i < strategies.length; i++) {
            addListener("ghost", new Ghost(3, ghostLoc[i], new RetreatUpdateStrategy(), new WanderUpdateStrategy(), strategies[i], new ReviveUpdateStrategy()));
        }
        return new GameBean(env.isGameover(), env.getFrightenedTimer(), env.getLevel(), matrix, pcs.getPropertyChangeListeners("player"), pcs.getPropertyChangeListeners("ghost"));
    }

    /**
     * Simple test performed already.
     *
     * @param level level
     * @return load map from json
     */
    private int[][] loadMapFromJson(int level, String filePath) {
        Gson gson = new Gson();
//        File file = new File(DispatcherAdapter.class.getClassLoader().getResource(filePath).getPath());
//        BufferedReader bufferedReader = new BufferedReader(json);
        JsonArray maps = new JsonParser().parse(json).getAsJsonArray();
        JsonObject currentObj = maps.get(level).getAsJsonObject();
        int[][] matrix = gson.fromJson(currentObj.get("map"), int[][].class);
        return matrix;
    }

    /**
     * Update game based on user input.
     *
     * @param userInput user input
     */
    public GameBean update(int id, String userInput) {
        // TODO: more params may be added to this method

        IGameCmd inputCmd = new InputCmd(id, userInput, env);
        pcs.firePropertyChange("player", null, inputCmd);


        return new GameBean(env.isGameover(), env.getFrightenedTimer(), env.getLevel(), env.getStaticMatrix(), pcs.getPropertyChangeListeners("player"), pcs.getPropertyChangeListeners("ghost"));
    }


    /**
     * Update the game world according to timestamp sent from the front end.
     *
     * @return GameBean, containing information of all game objects.
     */
    public GameBean update() throws FileNotFoundException {
        PropertyChangeListener[] list = pcs.getPropertyChangeListeners("ghost");
        MovingObj[] array = new MovingObj[list.length];
        for (int i = 0; i < list.length; i++) {
            array[i] = (MovingObj) list[i];
        }

        env.updateMode();

        if (env.getFruitTimer() == env.getMaxFruitTimer()) {
            if (!Fruit.isExist()) {
                Point fruitPlace = env.randEmptyPlace();
                env.setNonEmptyPlace(fruitPlace);
                env.setEdiblePlace(fruitPlace, Fruit.getInstance());
            }
            env.setFruitTimer(0);
        }


        IGameCmd updatePlayerCmd = new UpdateCmd(env, array);
        pcs.firePropertyChange("player", null, updatePlayerCmd);

        PropertyChangeListener[] playerlist = pcs.getPropertyChangeListeners("player");
        Player[] players = new Player[playerlist.length];
        for (int i = 0; i < playerlist.length; i++) {
            players[i] = (Player) playerlist[i];
        }

        if (env.getFrightenedTimer() == env.getMaxFrightenedTimer()) {
            for (int i = 0; i < list.length; i++) {
                Ghost ghost = (Ghost) array[i];
                ghost.setInvincible(false);
                ghost.updateStrategy("retreat");
                env.setGhostEatenNum(0);
            }
        } else if (env.getFrightenedTimer() == 0) {
            for (int i = 0; i < list.length; i++) {
                Ghost ghost = (Ghost) array[i];
                if (!ghost.getUpdateStrategyType().equals("revive")) {
                    ghost.setInvincible(true);
                    ghost.updateStrategy("wander");
                }
            }
        }

        if (env.getDotNums() <= 0) {
            //System.out.println("next level");
            reset();
            return loadGame((env.getLevel() + 1) % 6, playerlist.length, "public/map/map.json");
        }

        IGameCmd updateGhostCmd = new UpdateCmd(env, players);
        pcs.firePropertyChange("ghost", null, updateGhostCmd);

        return new GameBean(env.isGameover(), env.getFrightenedTimer(), env.getLevel(), env.getStaticMatrix(), pcs.getPropertyChangeListeners("player"), pcs.getPropertyChangeListeners("ghost"));

    }

    /**
     * Reset the game world.
     *
     * @return true if reset successfully.
     */
    public boolean reset() {

        //env = null;
        PropertyChangeListener[] listeners = pcs.getPropertyChangeListeners();
        for (PropertyChangeListener listener : listeners) {
            pcs.removePropertyChangeListener(listener);
        }
        return true;

    }

    public PropertyChangeSupport getPcs() {
        return pcs;
    }

    public AllEnv getEnv() {
        return env;
    }

    /**
     * Structure of the data.
     */
    public class GameBean {
        private boolean gameover;
        private int frightenedTimer;
        private int level;
        private int[][] staticMatrix;
        private PropertyChangeListener[] players;
        private PropertyChangeListener[] ghosts;

        /**
         * Constructor.
         */
        public GameBean(boolean gameover, int frightenedTimer, int level, int[][] staticMatrix, PropertyChangeListener[] players, PropertyChangeListener[] ghosts) {
            this.gameover = gameover;
            this.frightenedTimer = frightenedTimer;
            this.level = level;
            this.staticMatrix = staticMatrix;
            this.ghosts = ghosts;
            this.players = players;
        }
    }

    private String json = "[{\n" +
            "  \"map\": [[9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 0, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9], [9, 1, 1, 3, 1, 1, 1, 1, 1, 9, 9, 9, 9, 9, 0, 9, 9, 9, 9, 9, 1, 1, 1, 3, 9, 9, 1, 1, 1, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 0, 9, 9, 9, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 0, 9, 9, 9, 9, 9, 1, 9, 9, 1, 1, 1, 1, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 0, 9, 9, 9, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 0, 9, 9, 9, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9, 9, 1, 9], [9, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 9, 9, 9, 9, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 9, 9, 9, 9, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 1, 1, 1, 9, 9, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 9, 9, 1, 1, 1, 1, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9, 6, 6, 6, 9, 1, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9], [9, 1, 1, 1, 1, 1, 9, 9, 1, 1, 1, 1, 9, 6, 6, 4, 9, 1, 9, 9, 1, 1, 1, 1, 9, 9, 1, 1, 1, 1, 9], [9, 9, 9, 9, 9, 1, 9, 9, 9, 9, 9, 1, 2, 6, 6, 4, 9, 1, 9, 9, 9, 9, 9, 5, 9, 9, 9, 9, 9, 1, 9], [9, 9, 9, 9, 9, 1, 9, 9, 9, 9, 9, 1, 2, 6, 6, 4, 9, 1, 9, 9, 9, 9, 9, 7, 9, 9, 9, 9, 9, 1, 9], [9, 1, 1, 1, 1, 1, 9, 9, 1, 1, 1, 1, 9, 6, 6, 4, 9, 1, 9, 9, 1, 1, 1, 1, 9, 9, 1, 1, 1, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9, 6, 6, 6, 9, 1, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 1, 1, 1, 9, 9, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 9, 9, 1, 1, 1, 1, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 9, 9, 9, 9, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 9, 9, 9, 9, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9], [9, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 0, 9, 9, 9, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 0, 9, 9, 9, 9, 9, 1, 9, 9, 9, 9, 9, 1, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 0, 9, 9, 9, 9, 9, 1, 9, 9, 1, 1, 1, 1, 9, 9, 1, 9], [9, 1, 9, 9, 9, 1, 9, 9, 1, 9, 9, 9, 9, 9, 0, 9, 9, 9, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9, 9, 1, 9], [9, 1, 1, 3, 1, 1, 1, 1, 1, 9, 9, 9, 9, 9, 0, 9, 9, 9, 9, 9, 1, 1, 1, 3, 9, 9, 1, 1, 1, 1, 9], [9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 0, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9]],\n" +
            "  \"ghost\": {\n" +
            "    \"shadow\": 1,\n" +
            "    \"bashful\": 1,\n" +
            "    \"pokey\": 1,\n" +
            "    \"speedy\": 1\n" +
            "  }\n" +
            "},{\n" +
            "  \"map\": [[9,9,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,3,1,1,1,9,9,9,1,9,9,9,9,9,9,9,9,1,9,9,9,9,9,1,1,1,1,1,1,3,9],[9,1,9,9,1,9,9,9,1,9,9,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9,9,9,9,9,1,9],[9,1,1,1,1,1,1,1,1,9,9,1,9,9,1,1,1,1,9,9,1,9,9,1,1,1,1,1,1,1,9],[9,9,9,9,1,9,9,9,1,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,9],[9,9,9,9,1,9,9,9,1,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,9],[9,1,1,1,1,9,9,9,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,9,9,1,1,1,1,9],[9,1,9,9,1,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,9,1,9,9,1,9,6,6,6,9,1,9,9,1,9,9,5,9,9,1,9,9,1,9],[9,1,9,9,1,1,1,1,1,9,9,1,9,6,6,4,9,1,1,1,1,9,9,1,1,1,1,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,2,6,6,4,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,2,6,6,4,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,1,1,1,1,9,9,1,9,6,6,4,9,1,1,1,1,9,9,1,1,1,1,9,9,1,9],[9,1,9,9,1,9,9,9,1,9,9,1,9,6,6,6,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,7,9,9,1,9,9,1,9],[9,1,1,1,1,9,9,9,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,9,9,1,1,1,1,9],[9,9,9,9,1,9,9,9,1,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,9],[9,9,9,9,1,9,9,9,1,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,9],[9,1,1,1,1,1,1,1,1,9,9,1,9,9,1,1,1,1,9,9,1,9,9,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,1,9],[9,1,9,9,1,9,9,9,1,9,9,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,3,1,1,1,9,9,9,1,9,9,9,9,9,9,9,9,1,9,9,9,9,9,1,1,1,1,1,1,3,9],[9,9,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,9]],\n" +
            "  \"ghost\": {\n" +
            "    \"shadow\": 1,\n" +
            "    \"bashful\": 1,\n" +
            "    \"pokey\": 1,\n" +
            "    \"speedy\": 1\n" +
            "  }\n" +
            "},{\n" +
            "  \"map\": [[9,9,9,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,3,1,1,1,1,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,1,1,3,9],[9,1,9,9,9,9,1,9,9,1,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,9,9,1,9,9,1,9,9,9,9,1,9,9,9,9,9,1,1,1,1,9,9,1,9,9,1,9],[9,1,9,9,1,1,1,1,1,1,1,1,9,9,1,1,1,1,9,9,1,9,9,9,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,1,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,1,1,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,1,1,1,1,9,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9,9,9,9,9,9,9],[9,1,9,9,1,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9,9,9,9,9,9,9],[9,1,1,1,1,9,9,9,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,9,9,1,1,1,1,9],[9,9,9,9,1,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,9,9,9,1,9,9,9,1,9,9,1,9,6,6,6,9,1,9,9,1,9,9,5,9,9,1,9,9,1,9],[9,1,1,1,1,1,1,1,1,9,9,1,9,6,6,4,9,1,1,1,1,9,9,1,1,1,1,9,9,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,2,6,6,4,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,2,6,6,4,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,1,1,1,1,1,1,1,9,9,1,9,6,6,4,9,1,1,1,1,9,9,7,1,1,1,9,9,1,9],[9,9,9,9,1,9,9,9,1,9,9,1,9,6,6,6,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,9,9,9,1,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,1,1,1,1,9,9,9,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,9,9,1,1,1,1,9],[9,1,9,9,1,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9,9,9,9,9,9,9],[9,1,9,9,1,1,1,1,1,9,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9,9,9,9,9,9,9],[9,1,9,9,1,9,9,9,9,9,9,1,1,1,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,1,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9],[9,1,9,9,1,1,1,1,1,1,1,1,9,9,1,1,1,1,9,9,1,9,9,9,9,9,1,9,9,1,9],[9,1,9,9,9,9,1,9,9,1,9,9,9,9,1,9,9,9,9,9,1,1,1,1,9,9,1,9,9,1,9],[9,1,9,9,9,9,1,9,9,1,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,3,1,1,1,1,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,1,1,3,9],[9,9,9,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9]],\n" +
            "  \"ghost\": {\n" +
            "    \"shadow\": 1,\n" +
            "    \"bashful\": 1,\n" +
            "    \"pokey\": 1,\n" +
            "    \"speedy\": 1\n" +
            "  }\n" +
            "},{\n" +
            "  \"map\": [[9,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,1,9,9,9,9,9,9,9],[9,3,1,1,1,9,9,1,9,9,1,1,1,1,9,9,1,1,1,1,9,9,9,1,9,9,1,1,1,3,9],[9,1,9,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,1,1,1,1,1,1,1,9,9,1,1,1,1,9,9,1,1,1,1,1,1,1,1,9,9,1,9],[9,1,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,9,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,1,9,9,1,9,9,9,9],[9,9,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,1,9,9,1,9,9,9,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,6,6,6,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9],[9,1,9,9,1,1,1,1,1,9,9,1,9,6,6,4,9,1,9,9,1,1,1,5,1,1,1,9,9,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,2,6,6,4,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,2,6,6,4,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,1,1,1,1,9,9,1,9,6,6,4,9,1,9,9,1,1,1,7,1,1,1,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,6,6,6,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,9],[9,9,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,1,9,9,1,9,9,9,9],[9,9,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,1,9,9,1,9,9,9,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,1,1,1,1,1,1,9,9,1,1,1,1,9,9,1,1,1,1,1,1,1,1,9,9,1,9],[9,1,9,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9,9,9,1,9,9,1,9,9,1,9],[9,3,1,1,1,9,9,1,9,9,1,1,1,1,9,9,1,1,1,1,9,9,9,1,9,9,1,1,1,3,9],[9,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,1,9,9,9,9,9,9,9]],\n" +
            "  \"ghost\": {\n" +
            "    \"shadow\": 1,\n" +
            "    \"bashful\": 1,\n" +
            "    \"pokey\": 1,\n" +
            "    \"speedy\": 1\n" +
            "  }\n" +
            "},{\n" +
            "  \"map\": [[9,9,9,9,9,9,9,9,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,3,1,1,1,9,9,1,1,1,1,9,9,9,1,9,9,1,1,1,1,1,1,1,9,9,1,1,1,3,9],[9,1,9,9,1,9,9,1,9,9,1,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,1,1,1,1,9,9,1,1,1,1,1,1,1,1,9,9,9,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,1,9,9,9,9,9,9,1,9,9,1,9,9,1,1,1,1,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,1,9,9,9,9,9,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,1,1,1,1,9,9,1,1,1,1,1,1,1,1,9,9,1,1,1,1,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,9,9,9,1,1,1,1,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,1,1,1,9,9,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,9,6,6,6,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,1,1,1,1,1,1,1,1,9,9,1,9,6,6,4,9,1,9,9,1,1,1,5,9,9,1,1,1,1,9],[9,9,9,9,9,1,9,9,9,9,9,1,2,6,6,4,9,1,9,9,9,9,9,1,9,9,9,9,9,9,9],[9,9,9,9,9,1,9,9,9,9,9,1,2,6,6,4,9,1,9,9,9,9,9,1,9,9,9,9,9,9,9],[9,1,1,1,1,1,1,1,1,9,9,1,9,6,6,4,9,1,9,9,1,1,1,1,9,9,1,1,1,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,9,6,6,6,9,1,9,9,1,9,9,7,9,9,1,9,9,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,1,1,1,9,9,1,9],[9,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,9,9,9,1,1,1,1,9,9,1,9],[9,1,1,1,1,9,9,1,1,1,1,1,1,1,1,9,9,1,1,1,1,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,1,9,9,9,9,9,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,1,9,9,9,9,9,9,1,9,9,1,9,9,1,1,1,1,9,9,1,9,9,1,9],[9,1,9,9,1,1,1,1,9,9,1,1,1,1,1,1,1,1,9,9,9,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,1,9,9,1,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9],[9,3,1,1,1,9,9,1,1,1,1,9,9,9,1,9,9,1,1,1,1,1,1,1,9,9,1,1,1,3,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9]],\n" +
            "  \"ghost\": {\n" +
            "    \"shadow\": 1,\n" +
            "    \"bashful\": 1,\n" +
            "    \"pokey\": 1,\n" +
            "    \"speedy\": 1\n" +
            "  }\n" +
            "},{\n" +
            "  \"map\": [[9,9,9,9,9,9,9,9,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,3,1,1,1,9,9,9,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,1,1,1,1,1,3,9],[9,1,9,9,1,9,9,9,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,1,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,1,1,1,9,9,1,9,9,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9],[9,1,1,1,1,1,1,1,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,9,9,1,1,1,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,9,6,6,6,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,1,1,1,1,1,1,1,1,9,9,1,9,6,6,4,9,1,1,1,1,9,9,1,1,1,1,9,9,1,9],[9,9,9,9,9,1,9,9,9,9,9,1,2,6,6,4,9,1,9,9,9,9,9,5,9,9,9,9,9,1,9],[9,9,9,9,9,1,9,9,9,9,9,1,2,6,6,4,9,1,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,1,1,1,1,1,1,1,9,9,1,9,6,6,4,9,1,1,1,1,9,9,7,1,1,1,9,9,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,9,6,6,6,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9,9,1,9,9,1,9],[9,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,9,9,1,1,1,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,1,9,9,9,9,9,1,9],[9,1,1,1,1,1,1,1,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9],[9,1,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,9,9,9,1,9,9,9,9,9,1,9,9,1,9],[9,1,9,9,1,1,1,1,1,1,1,1,1,1,1,9,9,1,1,1,1,1,1,1,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,9,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,9,9,1,9,9,1,9],[9,3,1,1,1,9,9,9,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,1,1,1,1,1,1,3,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,1,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,9]],\n" +
            "  \"ghost\": {\n" +
            "    \"shadow\": 1,\n" +
            "    \"bashful\": 1,\n" +
            "    \"pokey\": 1,\n" +
            "    \"speedy\": 1\n" +
            "  }\n" +
            "}\n" +
            "]\n";
}
